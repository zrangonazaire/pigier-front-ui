<app-menu></app-menu>
<div class="container-fluid py-4">

  <!-- ======= TITRE + FILTRES ======= -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white fw-bold">
      üéì Gestion des Notes - CC & Examen
    </div>
    <div class="card-body">
      <form class="row g-3">
        <div class="col-md-3">
          <label class="form-label">Centre</label>
          <select class="form-select">
            <option>Choisir...</option>
            <option>Abidjan Plateau</option>
            <option>Abidjan Yamoussoukro</option>
            <option>Yamoussoukro</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Parcours</label>
          <input type="text" class="form-control" placeholder="Informatique, Gestion...">
        </div>
        <div class="col-md-2">
          <label class="form-label">Niveau</label>
          <select class="form-select">
            <option>L1</option><option>L2</option><option>M1</option><option>M2</option>
          </select>
        </div>
        <div class="col-md-2">
          <label class="form-label">Classe</label>
          <input type="text" class="form-control" placeholder="Classe A">
        </div>
        <div class="col-md-2">
          <label class="form-label">Semestre</label>
          <select class="form-select">
            <option>S1</option><option>S2</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">UE</label>
          <input type="text" class="form-control" placeholder="Maths, Prog...">
        </div>
        <div class="col-md-3">
          <label class="form-label">Enseignant</label>
          <input type="text" class="form-control" placeholder="Nom de l‚Äôenseignant">
        </div>
      </form>
    </div>
  </div>

  <!-- ======= ONGLET NOTES ======= -->
  <ul class="nav nav-tabs" id="notesTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="cc-tab" data-bs-toggle="tab" data-bs-target="#cc"
        type="button" role="tab">
        üìò Notes Contr√¥le Continu
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="exam-tab" data-bs-toggle="tab" data-bs-target="#exam"
        type="button" role="tab">
        üìù Notes Examen
      </button>
    </li>
  </ul>

  <div class="tab-content" id="notesTabsContent">
    <!-- ========== TABLEAU CC ========== -->
    <div class="tab-pane fade show active p-3" id="cc" role="tabpanel">
      <div class="d-flex justify-content-between mb-3">
        <h5 class="fw-bold">üìò Saisie - Contr√¥le Continu</h5>
        <div>
          <button class="btn btn-success btn-sm me-2">
            <i class="bi bi-file-earmark-excel"></i> Importer
          </button>
          <button class="btn btn-outline-primary btn-sm">
            <i class="bi bi-download"></i> Exporter
          </button>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Matricule</th>
              <th>Nom & Pr√©noms</th>
              <th>Note CC (Coef 2)</th>
            </tr>
          </thead>
          <tbody>
            @for (etu of etudiants; track etu; let i = $index) {
              <tr>
                <td>{{ i+1 }}</td>
                <td>{{ etu.matricule }}</td>
                <td>{{ etu.nom }}</td>
                <td>
                  <input type="number" [(ngModel)]="etu.cc" class="form-control form-control-sm">
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    <!-- ========== TABLEAU EXAMEN ========== -->
    <div class="tab-pane fade p-3" id="exam" role="tabpanel">
      <div class="d-flex justify-content-between mb-3">
        <h5 class="fw-bold">üìù Saisie - Examen</h5>
        <div>
          <button class="btn btn-success btn-sm me-2">
            <i class="bi bi-file-earmark-excel"></i> Importer
          </button>
          <button class="btn btn-outline-primary btn-sm">
            <i class="bi bi-download"></i> Exporter
          </button>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Matricule</th>
              <th>Nom & Pr√©noms</th>
              <th>Note Examen (Coef 1)</th>
              <th>Moyenne</th>
              <th>Absence</th>
            </tr>
          </thead>
          <tbody>
            @for (etu of etudiants; track etu; let i = $index) {
              <tr>
                <td>{{ i+1 }}</td>
                <td>{{ etu.matricule }}</td>
                <td>{{ etu.nom }}</td>
                <td>
                  <input type="number" [(ngModel)]="etu.exam" class="form-control form-control-sm">
                </td>
                <td>
                  <span class="badge bg-info">
                    {{ (etu.cc*2 + etu.exam)/3 | number:'1.2-2' }}
                  </span>
                </td>
                <td>
                  <input type="checkbox" [(ngModel)]="etu.absent">
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ======= STATISTIQUES ======= -->
  <div class="row mt-4 g-3">
    @for (s of statsCards; track s) {
      <div class="col-md-2">
        <div class="card text-center shadow-sm h-100">
          <div class="card-body">
            <h6 class="fw-bold">{{ s.title }}</h6>
            <p class="fs-4" [ngClass]="s.color">{{ s.value }}</p>
          </div>
        </div>
      </div>
    }
  </div>

</div>
